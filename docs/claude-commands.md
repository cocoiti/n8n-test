# Claude Codeコマンドテンプレート集

n8n開発で頻繁に使用するClaude Codeコマンドのテンプレート集です。効率的な開発のために活用してください。

## 目次

1. [プロジェクト管理](#プロジェクト管理)
2. [ワークフロー作成](#ワークフロー作成)
3. [ノード設定](#ノード設定)
4. [データ変換](#データ変換)
5. [エラーハンドリング](#エラーハンドリング)
6. [テスト](#テスト)
7. [デバッグ](#デバッグ)
8. [ドキュメント生成](#ドキュメント生成)

## プロジェクト管理

### 新規n8nプロジェクト初期化
```
「新しいn8nワークフロープロジェクトを初期化してください。
プロジェクト名: [プロジェクト名]
目的: [プロジェクトの目的や概要]
使用予定のn8nノードタイプ: [HTTP Request, Webhook, Function, etc.]

以下を含めてください：
- プロジェクト構造の作成
- 設定ファイルのテンプレート
- .gitignoreの設定
- 基本的なドキュメント
- 開発環境のセットアップガイド」
```

### 既存プロジェクトのセットアップ
```
「このn8nプロジェクトをセットアップしてください：
- 環境設定ファイルの確認と作成
- 必要な依存関係のチェック
- n8nインスタンスへの接続テスト
- 開発環境の準備完了まで案内してください」
```

### ワークフロー仕様書作成
```
「以下のワークフローの仕様書を作成してください：
ワークフロー名: [ワークフロー名]
機能概要: [機能の概要]
入力: [入力データや条件]
出力: [期待される出力]
業務要件: [詳細な要件]

要件定義書、設計書、実装仕様書の3段階で作成し、
適切なファイル名とID（REQ-XXX, DES-XXX, IMP-XXX）を付けてください。」
```

## ワークフロー作成

### 仕様書からワークフロー実装
```
「実装仕様書（IMP-XXX）に基づいてn8nワークフローJSONファイルを作成してください：
仕様書ファイル: [IMP-XXX_workflow-name.md]

以下を含めて実装してください：
- 正確なノード設定（パラメータ、位置、ID）
- 適切なノード間接続
- n8n 1.x API形式での出力
- settings プロパティの追加
- active プロパティの除外
- workflows/workflow-name/development/ ディレクトリに保存

実装完了後は make upload-dev WORKFLOW=workflow-name/development/workflow.json でテストできるようにしてください。」
```

### 新規ワークフロー作成（仕様書付き）
```
「以下の要件でワークフローを作成してください：
ワークフロー名: [ワークフロー名]
機能概要: [機能の詳細説明]
トリガー: [Webhook/Schedule/Manual など]
処理内容: [具体的な処理ステップ]
出力先: [Slack/Email/Database など]
エラーハンドリング: [必要な場合は詳細]

以下の順序で作成してください：
1. 要件定義書の作成
2. 設計書の作成
3. 実装仕様書の作成
4. ワークフローJSONファイルの実装
5. make upload-dev でのテスト準備」
```

### APIワークフロー
```
「以下のAPIを統合するn8nワークフローを作成してください：
API名: [API名]
エンドポイント: [URL]
認証方式: [Bearer Token/API Key/OAuth など]
レスポンス処理: [データの変換や保存方法]
エラーハンドリング: [HTTP エラー、レート制限など]

仕様書から実装まで一式で作成し、workflows/workflow-name/ 配下に適切に配置してください。」
```

### データ同期ワークフロー
```
「[ソースシステム]から[ターゲットシステム]へのデータ同期ワークフローを作成してください：
同期頻度: [リアルタイム/バッチ/スケジュール]
データマッピング: [フィールド対応表]
重複チェック: [主キーや条件]
エラー時の処理: [リトライ/ログ/通知]

完全な仕様書セット（REQ/DES/IMP）と実装済みJSONファイルを作成してください。」
```

## ノード設定

### HTTP Requestノード
```
「HTTP Requestノードを設定してください：
- メソッド: [GET/POST/PUT/DELETE]
- URL: [エンドポイントURL]
- ヘッダー: [必要なヘッダー情報]
- 認証: [認証方式と設定]
- ボディ: [リクエストボディの形式]」
```

### Functionノード
```
「以下の処理を行うFunctionノードのJavaScriptコードを作成してください：
- 入力データ: [データ形式と例]
- 処理内容: [具体的な変換や計算]
- 出力形式: [期待する出力]
- エラーハンドリング: [例外処理の要件]」
```

### IF条件分岐ノード
```
「以下の条件でIFノードの設定を作成してください：
- 条件: [判定条件の詳細]
- 真の場合: [処理内容]
- 偽の場合: [処理内容]
- データタイプ: [文字列/数値/ブール値など]」
```

## データ変換

### JSONデータ変換
```
「以下のJSONデータ変換を行うコードを作成してください：
入力JSON: [元データの例]
出力JSON: [変換後のデータ例]
変換ルール: [具体的な変換ロジック]」
```

### CSVデータ処理
```
「CSVデータを処理するn8nワークフローを作成してください：
- CSV形式: [列の定義]
- 変換処理: [データの加工方法]
- 出力先: [保存先やAPI送信先]
- バリデーション: [データ検証ルール]」
```

### 配列データ操作
```
「配列データを処理するFunctionノードを作成してください：
- 操作: [フィルタ/マップ/集約など]
- 条件: [処理条件]
- 出力: [結果の形式]」
```

## エラーハンドリング

### 包括的エラーハンドリング
```
「n8nワークフローに包括的なエラーハンドリングを追加してください：
- キャッチするエラー: [HTTP errors/Validation errors/API limits など]
- エラー時の処理: [ログ出力/通知/リトライ]
- 復旧手順: [自動復旧の仕組み]」
```

### リトライ機能
```
「APIコールにリトライ機能を追加してください：
- リトライ回数: [最大回数]
- 間隔: [リトライ間隔]
- 条件: [リトライする条件]
- 失敗時処理: [最終的に失敗した場合の処理]」
```

### 通知機能
```
「エラー発生時の通知機能を実装してください：
- 通知先: [Slack/Email/Teams など]
- 通知内容: [エラー詳細/ワークフロー名/発生時刻]
- 重要度: [Critical/Warning/Info]」
```

## テスト

### テストワークフロー作成
```
「以下のワークフローのテストを作成してください：
- テスト対象: [ワークフロー名]
- テストケース: [正常系/異常系の詳細]
- 期待値: [各テストの期待結果]
- モックデータ: [テスト用のサンプルデータ]」
```

### データバリデーション
```
「入力データのバリデーション機能を実装してください：
- バリデーションルール: [必須項目/形式チェック/範囲チェックなど]
- エラー時の処理: [エラーメッセージ/ログ出力]
- 成功時の処理: [次のノードへの継続]」
```

## デバッグ

### ログ出力追加
```
「ワークフローにデバッグ用のログ出力を追加してください：
- ログ箇所: [各ノードの入出力/重要な処理ポイント]
- ログレベル: [DEBUG/INFO/WARN/ERROR]
- ログ形式: [構造化ログ/プレーンテキスト]」
```

### パフォーマンス分析
```
「ワークフローのパフォーマンス分析機能を追加してください：
- 測定ポイント: [処理時間/メモリ使用量/API呼び出し回数]
- 出力形式: [ログ/メトリクス/ダッシュボード]
- 最適化提案: [ボトルネックの特定と改善案]」
```

## ドキュメント生成

### ワークフロー仕様書
```
「以下のワークフローの仕様書を作成してください：
- ワークフロー名: [名前]
- 目的: [何を自動化するか]
- 入力: [入力データの仕様]
- 処理フロー: [各ステップの詳細]
- 出力: [出力データの仕様]
- エラーハンドリング: [例外処理の詳細]」
```

### API仕様書
```
「ワークフローが使用するAPIの仕様書を作成してください：
- API一覧: [使用するAPI]
- エンドポイント: [URL/メソッド/パラメータ]
- 認証: [認証方式]
- レスポンス: [データ形式]
- エラーコード: [エラーハンドリング]」
```

## カスタムコマンド例

### 環境別デプロイ
```
「n8nワークフローの環境別デプロイ機能を実装してください：
- 環境: [development/staging/production]
- 設定差分: [環境固有の設定]
- デプロイ手順: [自動化された手順]
- ロールバック: [問題発生時の復旧手順]」
```

### モニタリング
```
「ワークフローのモニタリング機能を実装してください：
- 監視項目: [実行時間/成功率/エラー率]
- アラート条件: [閾値/通知先]
- ダッシュボード: [可視化の要件]
- レポート: [定期レポートの内容]」
```

## 使用上の注意

1. **コンテキストの提供**: 具体的な要件や制約を明確に伝える
2. **段階的な実装**: 複雑な機能は段階的に構築する
3. **テストの重要性**: 各段階でテストを実行する
4. **ドキュメント化**: 作成したワークフローは必ず文書化する

## 参考資料

- [n8nワークフロー開発ガイド](./n8n-workflow-guide.md)
- [セットアップ手順](./setup.md)
- [n8n公式ドキュメント](https://docs.n8n.io/)